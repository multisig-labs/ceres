FROM lukechannings/deno:v1.33.2 AS builder

WORKDIR /app

COPY . .

RUN deno compile --unstable --unsafely-ignore-certificate-errors --allow-net --allow-write --allow-read --output ceres main.ts

FROM debian:bullseye-slim

WORKDIR /app

COPY --from=builder /app/ceres .

ENTRYPOINT ["/app/ceres", "--mode"]
